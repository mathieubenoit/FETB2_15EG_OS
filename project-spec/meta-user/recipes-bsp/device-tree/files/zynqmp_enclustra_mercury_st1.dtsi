#include <dt-bindings/phy/phy.h>

&usb0 {
	status = "okay";
};

&usb1 {
	status = "disabled";
};

&dwc3_0 {
	status = "okay";
	dr_mode = "host";
	snps,usb3_lpm_capable;
	phy-names = "usb3-phy";
	phys = <&lane2 PHY_TYPE_USB3 0 2 100000000>;
	maximum-speed = "super-speed";
};

&dwc3_1 {
	status = "disabled";
	dr_mode = "host";
	snps,usb3_lpm_capable;
	phy-names = "usb3-phy";
	phys = <&lane3 PHY_TYPE_USB3 1 2 100000000>;
	maximum-speed = "super-speed";
};

/* SD1 with level shifter */
&sdhci1 {
	status = "okay";
	no-1-8-v;	/* for 1.0 silicon */
	wp-inverted;
	xlnx,mio_bank = <1>;
};

&amba {
	ref100: ref100M {
		compatible = "fixed-clock";
		#clock-cells = <0>;
		clock-frequency = <100000000>;
	};
};


&xlnx_dpdma {
	status = "okay";
};

&zynqmp_dpsub {
	status = "okay";
	phy-names = "dp-phy0", "dp-phy1";
	phys = <&lane1 PHY_TYPE_DP 0x0 0x3 27000000>, <&lane0 PHY_TYPE_DP 0x1 0x3 27000000>;
	dma-names = "vid0", "vid1", "vid2", "gfx0";
	dmas = <&xlnx_dpdma 0>, <&xlnx_dpdma 1>, <&xlnx_dpdma 2>, <&xlnx_dpdma 3>;
};

/* DisplayPort */
&zynqmp_dpsub {
	status = "okay";
	xlnx,vid-clk-pl;
	
	xlnx_dp_sub: zynqmp_dpsub@fd4a0000 {
		compatible = "xlnx,zynqmp-dpsub-1.7";
		reg = <0xfd4a0000 0x1000>, 
                      <0xfd4aa000 0x1000>, 
                      <0xfd4ab000 0x1000>, 
                      <0xfd4ac000 0x1000>;
		reg-names = "dp", "blend", "av_buf", "aud";
		xlnx,output-fmt = "rgb";

		xilinx_drm {
			compatible = "xlnx,drm";
			clocks = <&zynqmp_clk 16>;
			xlnx,connector-type = "DisplayPort";
			
			planes {
				xlnx,pixel-format = "rgb565";
				gfx-layer {
					dmas = <&xlnx_dpdma 3>;
					dma-names = "gfx0";
				};
				vid-layer {
					dmas = <&xlnx_dpdma 0>, 
                                               <&xlnx_dpdma 1>, 
                                               <&xlnx_dpdma 2>;
					dma-names = "vid0", "vid1", "vid2";
				};
			};
		};

		ports {
			port@0 {
				reg = <0>;

				dp_out: endpoint {
					remote-endpoint = <&dp_out>;
				};
			};
		};

	};
};



&zynqmp_dp_snd_pcm0 {
    status = "disabled";
};

&zynqmp_dp_snd_pcm1 {
    status = "disabled";
};

&zynqmp_dp_snd_card0 {
    status = "disabled";
};

&zynqmp_dp_snd_codec0 {
    status = "disabled";
};
